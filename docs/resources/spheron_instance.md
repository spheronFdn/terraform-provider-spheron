---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Spheron Instance Resource - terraform-provider-spheron"
subcategory: ""
description: |-
  Instnce resource
---

# Spheron Instance (Resource)

Instnce resource

```
resource "spheron_instance" "instance_test" {
  image         = "crccheck/hello-world"
  tag           = "latest"
  cluster_name  = "tf_test"
  region        = "any"
  machine_image = "Ventus Small"

  args     = ["arg"]
  commands = ["command"]

  ports = [
    {
      container_port = 8000
      exposed_port   = 80
    }
  ]
  env = [
    {
      key   = "k",
      value = "v"
    }
  ]

  health_check = {
    path = "/"
    port = 8000
  }
}
```

## Schema

### Required

- `cluster_name` (String) The name of the cluster.
- `image` (String) The docker image to deploy. Currently only public dockerhub images are supported.
- `machine_image` (String) Machine image name which should be used for deploying instance.
- `ports` (Attributes List) The list of port mappings (see [below for nested schema](#nestedatt--ports))
- `region` (String) Region to which to deploy instance.
- `replicas` (Number) Number of instance replicas.
- `storage` (Number) Instance storage in GB. Value cannot exceed 1024GB
- `tag` (String) The tag of docker image.

### Optional

- `args` (List of String) List of params for docker CMD command.
- `commands` (List of String) List of executables for docker CMD command.
- `env` (Attributes Set) The list of environmetnt variables. (see [below for nested schema](#nestedatt--env))
- `env_secret` (Attributes Set) The list of secret environmetnt variables. (see [below for nested schema](#nestedatt--env_secret))
- `health_check` (Attributes) Path and container port on which health check should be done. (see [below for nested schema](#nestedatt--health_check))
- `id` (String) Id of the instance.
- `persistent_storage` (Attributes) Persistent storage that will be attached to the instance. (see [below for nested schema](#nestedatt--persistent_storage))

<a id="nestedatt--ports"></a>
### Nested Schema for `ports`

Required:

- `container_port` (Number) Container port that will be exposed.

Optional:

- `exposed_port` (Number) The port container port will be exposed to. Currently only posible to expose to port 80. Leave empty to map to random value. Exposed port will be know and available for use after the deployment.


<a id="nestedatt--env"></a>
### Nested Schema for `env`

Required:

- `key` (String) Environment variable key.
- `value` (String) Environment variable value.


<a id="nestedatt--env_secret"></a>
### Nested Schema for `env_secret`

Required:

- `key` (String) Environment variable key.
- `value` (String) Environment variable value.


<a id="nestedatt--health_check"></a>
### Nested Schema for `health_check`

Required:

- `path` (String) Path on which health check should be done.
- `port` (Number) Instance container path on which health check should be done.


<a id="nestedatt--persistent_storage"></a>
### Nested Schema for `persistent_storage`

Required:

- `class` (String) Storage class. Available classes are HDD, SSD and NVMe
- `mount_point` (String) Attachement point used fot attaching persistent storage.
- `size` (Number) Persistent storage in GB. Value cannot exceed 1024GB



